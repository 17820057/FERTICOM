<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>INICIAR SESIÓN</title>
    <link rel="icon" href="../recursos/favicon.ico" />
    <link rel="stylesheet" href="iniciarse.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
</head>

<body>
    <form action="" class="form">
        <h3 class="form__title">INICIAR SESIÓN</h3>

        <div class="form__container">
            <div class="form__group">
                <label for="Nombre de usuario">Nombre de usuario</label>
                <input type="text" name="nombre" id="nombre" class="form__imput" placeholder="Nombre de usuario" />
            </div>
            <div class="form__group">
                <label for="password">Contraseña</label>
                <input type="password" name="contraseña" id="contraseña" class="form__imput" placeholder="Contraseña" />
            </div>

            <div class="form__text">
                <p class="form__paragraph">
                    <a class="form__paragraph__href" href="">¿Olvidaste tu contraseña?</a>
                </p>
                <div class="form__submit__align">
                    <input type="submit" class="form__submit" value="Iniciar Sesión" />

                    <p class="form__pargraph__p">
                        O Iniciar Sesión con
                    </p>
                    <button id="logingoogle" class="form__submit__google">
                        <span class="form__submit__icon"></span>
                        <span class="form__submit__text">Continuar con Google</span>
                    </button>

                    <script type="module">
                        // Import the functions you need from the SDKs you need
                        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
                        import { 
                            getAuth, 
                            signInWithRedirect, 
                            GoogleAuthProvider, 
                            getRedirectResult
                        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
                        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
                        // TODO: Add SDKs for Firebase products that you want to use
                        // https://firebase.google.com/docs/web/setup#available-libraries
                      
                        // Your web app's Firebase configuration
                        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
                        const firebaseConfig = {
                            apiKey: "AIzaSyAhAe_RJnQz0O2H-VTgQfvS79qZF-gjTRY",
                            authDomain: "ferticom-56a61.firebaseapp.com",
                            projectId: "ferticom-56a61",
                            storageBucket: "ferticom-56a61.appspot.com",
                            messagingSenderId: "465982718067",
                            appId: "1:465982718067:web:0d5fc13cde260c17966a06",
                            measurementId: "G-L4NPPN1D46"
                        };
                      
                        // Initialize Firebase
                        const app = initializeApp(firebaseConfig);
                        const analytics = getAnalytics(app);
                        const provider = new GoogleAuthProvider();
                        const auth = getAuth(app);
        
                        document.getElementById('logingoogle').addEventListener('click', (e) => {
                            e.preventDefault();
                            signInWithRedirect(auth, provider);
                        });
        
                        getRedirectResult(auth)
                            .then((result) => {
                                if (result) {
                                    // This gives you a Google Access Token. You can use it to access Google APIs.
                                    const credential = GoogleAuthProvider.credentialFromResult(result);
                                    const token = credential.accessToken;

                                    // The signed-in user info.
                                    const user = result.user;

                                    // Use user info (e.g., user.email)
                                    console.log('User email: ', user.email);
                                    alert('User logged in: ' + user.displayName);
                                }
                            })
                            .catch((error) => {
                                console.error('Error during sign-in: ', error);
                                const errorCode = error.code;
                                const errorMessage = error.message;
                                // The email of the user's account used.
                                const email = error.customData?.email;
                                // The AuthCredential type that was used.
                                const credential = GoogleAuthProvider.credentialFromError(error);
                                // ...
                            });
                    </script>

                </div>
                <p class="form__paragraph__end">
                    ¿aun no tienes cuenta? <a class="form__paragraph__href__end"
                        href="../public/registrate.html">regístrate ahora</a>
                </p>
            </div>
        </div>
        </div>
    </form>


</body>

</html>